import{e as S,r as i,f as L,g as D,_ as V,j as l,h as v,i as y,k as m,m as w,n as B,o as $,p as _,c as x,d as P,P as F,T as g,D as T}from"./index-c701694e.js";import{P as A}from"./Page-99234618.js";import{L as k}from"./LoadingButton-ed86058a.js";const C=["component","direction","spacing","divider","children"];function I(e,t){const r=i.Children.toArray(e).filter(Boolean);return r.reduce((n,c,s)=>(n.push(c),s<r.length-1&&n.push(i.cloneElement(t,{key:`separator-${s}`})),n),[])}const R=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],H=({ownerState:e,theme:t})=>{let r=v({display:"flex",flexDirection:"column"},y({theme:t},m({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=w(t),c=Object.keys(t.breakpoints.values).reduce((o,a)=>((typeof e.spacing=="object"&&e.spacing[a]!=null||typeof e.direction=="object"&&e.direction[a]!=null)&&(o[a]=!0),o),{}),s=m({values:e.direction,base:c}),d=m({values:e.spacing,base:c});typeof s=="object"&&Object.keys(s).forEach((o,a,u)=>{if(!s[o]){const h=a>0?s[u[a-1]]:"column";s[o]=h}}),r=B(r,y({theme:t},d,(o,a)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${R(a?s[a]:e.direction)}`]:_(n,o)}})))}return r=$(t.breakpoints,r),r},N=S("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(H),M=i.forwardRef(function(t,r){const n=L({props:t,name:"MuiStack"}),c=D(n),{component:s="div",direction:d="column",spacing:p=0,divider:o,children:a}=c,u=V(c,C);return l(N,v({as:s,ownerState:{direction:d,spacing:p},ref:r},u,{children:o?I(a,o):a}))}),O=M,E="https://jsonplaceholder.typicode.com",q=(e=1)=>fetch(`${E}/posts?_page=${e}&_limit=5`).then(t=>{if(!t.ok)throw new Error("Error! Bad request");return t.json()}),U=e=>fetch(`${E}/posts/${e}`,{method:"DELETE"}).then(t=>{if(!t.ok)throw new Error("Error! Bad request");return t.json()}),j=(e,t=!1)=>{const[r,n]=i.useState(null),[c,s]=i.useState(null),[d,p]=i.useState(!1),o=i.useCallback(async(...a)=>{p(!0),n(null),s(null);try{const u=await e(...a);return n(u),u}catch(u){s(u.message)}finally{p(!1)}},[e]);return i.useEffect(()=>{t&&o()},[o,t]),{data:r,error:c,isLoading:d,executeFetch:o}},W=({post:e,onDeletePost:t})=>{const{title:r,body:n}=e,{t:c}=x(),{isLoading:s,error:d,executeFetch:p}=j(U);return P(F,{component:"li",sx:{p:2},children:[l(g,{variant:"h5",children:r}),l(g,{children:n}),l(T,{sx:{my:2}}),l(k,{variant:"contained",sx:{ml:"auto",display:"flex",alignItems:"center"},loading:s,onClick:async()=>{await p(e.id),t(e.id)},children:c("posts.delete")}),d&&l(g,{color:"red",variant:"body2",children:d})]},e.id)},z=({posts:e,onDeletePost:t})=>l(O,{component:"ul",spacing:2,children:e.map(r=>l(W,{post:r,onDeletePost:t},r.id))}),G=()=>{const{t:e}=x(),[t,r]=i.useState([]),[n,c]=i.useState(1),{data:s,executeFetch:d,isLoading:p,error:o}=j(q),a=()=>c(f=>f+1),u=f=>{r(h=>h.filter(({id:b})=>b!==f))};return i.useEffect(()=>{d(n)},[n]),i.useEffect(()=>{Array.isArray(s)&&r(f=>[...f,...s])},[s]),P(A,{children:[o&&l(g,{variant:"body1",textAlign:"center",children:o}),l(z,{posts:t,onDeletePost:u}),!o&&l(k,{onClick:a,sx:{mt:2,mx:"auto",display:"flex",alignItems:"center"},variant:"contained",loading:p,children:e("posts.load_more")})]})},X=G;export{X as default};
